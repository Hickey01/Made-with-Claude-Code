# ============================================================================
# CHG HEALTHCARE MCP SERVER CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual CHG Healthcare values
# This is for ENTERPRISE DEPLOYMENT with user-level Okta SSO authentication

# ============================================================================
# OKTA SSO CONFIGURATION (CHG Healthcare)
# ============================================================================
# This configuration allows individual CHG employees to authenticate with
# their own Okta credentials (not a shared service account)

# Okta Authorization Server Issuer URL
# CHG Healthcare Okta domain
OKTA_ISSUER=https://chghealthcare.okta.com/oauth2/default

# Okta API Audience
# This identifies your MCP server as a protected resource
# Coordinate with CHG IT to set this value
OKTA_AUDIENCE=api://mcp-server
# Alternative: OKTA_AUDIENCE=https://mcp.chghealthcare.com

# Okta Application Client ID
# Create a "Web Application" or "Native Application" in Okta (NOT Service app)
# This allows user-level authentication with Authorization Code flow
# Find in: Okta Admin → Applications → Your MCP Application → General
OKTA_CLIENT_ID=your_web_app_client_id_here

# ============================================================================
# IMPORTANT: Authentication Flow Selection
# ============================================================================
#
# FOR PRODUCTION (Individual User Authentication):
#   - Use Web Application or Native Application in Okta
#   - Grant type: Authorization Code + PKCE
#   - Each user authenticates with their CHG credentials
#   - User's Okta groups determine their access level
#   - Audit logs show individual user activity
#   - DO NOT SET OKTA_CLIENT_SECRET (not needed for auth code flow)
#
# FOR DEVELOPMENT/TESTING ONLY (Service Account):
#   - Use Machine-to-Machine application in Okta
#   - Grant type: Client Credentials
#   - Shared service account (not recommended for production)
#   - Set OKTA_CLIENT_SECRET below
#
# OKTA_CLIENT_SECRET=your_client_secret_here  # Only for dev/testing!

# ============================================================================

# TABLEAU CONFIGURATION (CHG Healthcare)
# ============================================================================
# CHG Healthcare Tableau Online instance
# URL: https://10ay.online.tableau.com/#/site/chghealthcare/home

# Tableau Server URL (CHG Healthcare Tableau Online)
TABLEAU_SERVER_URL=https://10ay.online.tableau.com

# Tableau Site ID (CHG Healthcare site)
TABLEAU_SITE_ID=chghealthcare

# Service Account Authentication (Recommended for MCP Server)
# The MCP server connects to Tableau using a service account
# Individual user access is still controlled by Okta RBAC
# Only users with mcp_analyst or mcp_admin roles can access Tableau tools

# Option 1: Personal Access Token (Recommended)
# Create in Tableau: My Account Settings → Personal Access Tokens
TABLEAU_TOKEN_NAME=mcp-server-token
TABLEAU_TOKEN_VALUE=your_tableau_token_here

# Option 2: Username/Password (Alternative - less secure)
# TABLEAU_USERNAME=service-account@chghealthcare.com
# TABLEAU_PASSWORD=your_tableau_password

# NOTE: Tableau authentication is separate from Okta user authentication
# - Okta controls WHO can access Tableau tools (mcp_analyst role required)
# - Tableau credentials control WHAT data the server can retrieve
# - Audit logs track which Okta user requested Tableau data

# Server Configuration
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8000

# Logging Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
